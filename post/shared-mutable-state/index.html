<!DOCTYPE html>
<html lang="en-us">
    <head>
		
		
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Networks Git Containers Jamstack &middot; cjon&#39;s blog</title>

		
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/fonts.css">
		
		<link rel="icon" href="/favicon.ico"/>
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="cjon&#39;s blog" />

		<script src="/js/darkmode.js"></script>
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					
						<h2 class="nav-title">cjon&#39;s blog</h2>
					
				</a>
				<ul>
    
    
</ul>
			</div>
		</nav>

        <div id="darkModeToggle" onclick="toggleDarkMode()">
  &#9680; 
</div>

        

<main>
	


        <div class="post">
		<div class="post-info">
    <span>Written by</span>
        
        <br>
        <span>on&nbsp;</span><time datetime="2022-05-28 17:25:48 -0400 EDT">May 28, 2022</time>
</div>

		<h1 class="post-title">Networks Git Containers Jamstack</h1>
<div class="post-line"></div>

		

		<p>If we&rsquo;re careless in how we handle shared mutable state cause then it will cause
problems. This is some random thoughts about how we deal with it.</p>
<h2 id="git">Git</h2>
<p>Git is a good example of a system to manage shared mutable state. It works well
because there is almost no shared state mutation. It gives the appearance of
having mutable state because &ldquo;files do change.&rdquo; There is no actual state
mutation there though because a commit just creates a new object. A new commit
object that points at different blobs. The only real state change is where the
HEAD ref is pointing.</p>
<p>Now it is well known that you can actually kind of mutate state doing a rebase.
Doing a rebase locally looks a lot like mutating state, even if not shared
state. As long as we do it locally it is fine. But it is a well known rule that
you should never do a rebase to something you&rsquo;ve committed upstream. This is
because it very much resembles mutating shared state.</p>
<p>But git is very carefuly about state, so really even this isn&rsquo;t really mutating
state, it just creates new commit objects and moved the HEAD ref. Git is very
careful with how it mutates state. It creates a bunch of new commits and it
changes refs, and that&rsquo;s about the only thing it changes. It is probablematic to</p>
<p>see: <a href="https://github.blog/2020-12-17-commits-are-snapshots-not-diffs/">Commits are snapshots, not diffs</a></p>
<h2 id="networks">Networks</h2>
<p>I&rsquo;ve been a network admin at a small web host for over a decade. Started with
Foundry, did Cisco 6500s for far too long, and then switched to Juniper (MX and
QFX primarily).  When I started I was a hybrid programmer/sysadmin/netadmin
because the company was less than 10 people. Slowly my role became more and more
network focused because I was the only one who really &ldquo;understood that stuff.&rdquo;</p>
<p>I did gravitate to that role somewhat because it suited me.</p>
<p>The clean separation between configuration and ephemeral state in network
devices always seemed much nicer and cleaner than the sysadmin environment. So I
slowly drifted away from maintaining those systems.</p>
<p>And programming in that environment was frustrating for me because the company
was PHP based, and&hellip; PHP of that era was not to my taste. It&rsquo;s still one of my
least favorite languages, but I do hear it is much improved.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>So my job slowly shifted over to just wrangling network devices. We have
hundreds of them, and making sure the systems are deployed in ways that maximize
uptime and ensure you can make changes was enough to keep me busy for awhile.</p>
<p>And then the job slowly shifted back to my needing all 3 hats again. We got
servers to monitor, so SysAdmin again. And automation was required as we scaled
up so that brought back the programmer bit.</p>
<h2 id="containers">Containers</h2>
<blockquote>
<p>Containers provide a standard way to package application&rsquo;s code and dependencies into a single object
&amp;emdash; <a href="https://aws.amazon.com/getting-started/deep-dive-containers/">AWS Deep Dive Containers</a></p>
</blockquote>
<p>But the SysAdmin world has shifted a good bit thanks to containers. The
separation between config and more ephemeral state is much better. And the
automation tools are similar to what we use on the network side.</p>
<p>This means that being a sysadmin is really just as clean as being a netadmin,
which is a huge improvement.</p>
<h2 id="jamstack">Jamstack</h2>
<p>I&rsquo;ve been playing with static site generators recently and it made me think
about shared mutable state. The interesting thing is how it separates the static
assets on your site from the more dynamic parts. You generate a purely static
site from the standpoint of page loads and then any mutable state is carefully
hidden away inside an API.  This reminds me a bit of the other neat separations
of static config and ephemeral state with carefully segregated pieces of shared
mutable state isolated and controlled behind an API.</p>
<p>I&rsquo;m still very preliminary in playing with Jamstack, but it seems to me that the
pattern of separating things that have different levels of mutability applies
just as well to the front end as well.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>This is probably unfair. I had a similar experience with Java when it
first came out and I ended up working with applets. It was not a good
experience. Probably as a result,  I also regard Java among my least favorite
languages. I can at least read Java and only feel mildly nauseated though, a
much less visceral reaction than I get when I look at PHP.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


		
	</div>

	<div class="pagination">

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			
			<span>
			&copy; <time datetime="2022-05-30 12:32:47.727198 -0400 EDT m=&#43;0.044342751">2022</time> . Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
